

[ParticleStream<PARTICLE [Object]> : [Object]] (@@@@@@Object, Variable, Maybe@@@@@@)
	[->[Maybe<[&PARTICLE]>]] particleProviderForStream
	[Variable<[Maybe<[&PARTICLE]>]>] maybeCurrentNextAvaliableParticle
	[Variable<[Maybe<[&PARTICLE]>]>] maybeCurrentNextOverAvaliableParticle
{
	~ streamWithParticleProvider *([->[Maybe<[&PARTICLE]>]] particleProviderForStream) {
		\::newObject;
		.particleProviderForStream = particleProviderForStream;
		.maybeCurrentNextAvaliableParticle = \[Variable<[Maybe<[&PARTICLE]>]>]:as (\particleProviderForStream);
		.maybeCurrentNextOverAvaliableParticle = \[Variable<[Maybe<[&PARTICLE]>]>]:as (\particleProviderForStream);
	}

	++ maybeTakeNextAvaliableParticle *()->[Maybe<[&PARTICLE]>] {
		[Maybe<[&PARTICLE]>] maybeNextParticle = \.maybeCurrentNextAvaliableParticle:get;
		\moveToNextParticle;
	} -> maybeNextParticle

	++ maybePeekAtNextAvaliableParticle *()->[Maybe<[&PARTICLE]>] {	
	} -> \.maybeCurrentNextAvaliableParticle:get

	++ maybePeekAtNextOverAvaliableParticle *()->[Maybe<[&PARTICLE]>] {
	} -> \.maybeCurrentNextOverAvaliableParticle:get

	- moveToNextParticle *{
		\.maybeCurrentNextAvaliableParticle:set (\.maybeCurrentNextOverAvaliableParticle:get);
		\.maybeCurrentNextOverAvaliableParticle:set (\particleProviderForStream);
	}
}

