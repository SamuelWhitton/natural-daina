

[] (DainaCompiler) 
{
	^ *{
		[DainaCompiler] dainaCompiler = \[DainaCompiler]:newDainaCompiler;
		\dainaCompiler:runDainaCompiler;
	}
}


[DainaCompiler : [Object]] (DainaCommandInterface, DainaCommand, DainaSyntaxTree, File) 
	[DainaSyntaxTree] syntaxTreeRepresentingParsedProgram
{
	~ newDainaCompiler *{
		\::newObject;
		.syntaxTreeRepresentingParsedProgram = \[DainaSyntaxTree]:newEmptySyntaxTree;
	}

	++ runDainaCompiler *{
		[DainaCommandInterface] dainaCommandInterface = \[DainaCommandInterface]:newDainaCommandInterface;
		\dainaCommandInterface:receiveCommandsFromUserUntilExitCommandIsReceivedWithCommandReceiver
		 	:performCorrespondingActionForDainaCommand;
	}

	- performCorrespondingActionForDainaCommand *([DainaCommand] dainaCommandInQuestion) {
		\dainaCommandInQuestion:ifCommandIsParseDainaSourceFile loadFileAndParseIntoSyntaxTreeRepresentingParsedProgram;
		\dainaCommandInQuestion:ifCommandIsAnalyseAndSynthesiseSyntaxTree analyseAndSynthesiseSyntaxTreeRepresentingParsedProgram;
		\dainaCommandInQuestion:ifCommandIsCompileToJavaInDirectory compileSyntaxTreeIntoJavaWithinGivenDirectory;
		\dainaCommandInQuestion:ifCommandIsCompileToCInDirectory compileSyntaxTreeIntoCWithinGivenDirectory;
	}
}
